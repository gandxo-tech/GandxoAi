<!DOCTYPE html>
<html lang="fr">  
<head>  
  <meta charset="UTF-8">  
  <title>GandxoAI</title>  
  <style>  
    * {
      box-sizing: border-box;
    }

    body {
  margin: 0;
  padding: 0;
  height: 100dvh;
  display: flex;
  flex-direction: column;
  background-color: #0d1117;
  font-family: 'Arial', sans-serif;
}

.titre {
  text-align: center;
  color: #8ca6ff;
  padding: 15px 0;
  font-size: 24px;
}

.chatcontainer {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  background-color: #121a2c;
  border: 4px solid #2138a7;
  margin: 0 5%;
  border-radius: 10px;
}

.message {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 10px;
  gap: 10px;
  background-color: #0d1117;
  border-top: 1px solid #2138a7;
  margin-top: auto;
}

.message input {
  flex: 1;
  padding: 10px;
  border-radius: 10px;
  border: 2px solid #2138a7;
  font-size: 16px;
  color: #fff;
  background-color: transparent;
}

.message button {
  padding: 10px 15px;
  border-radius: 10px;
  border: 2px solid #8ca6ff;
  background-color: transparent;
  color: #8ca6ff;
  cursor: pointer;
}
  </style>  
</head>  
<body>  
  <h1>GandxoAI</h1>  
  <div class="chatcontainer" id="chatcontainer"></div>  
  <div class="message">  
    <input type="text" placeholder="Écrivez à GandxoAI" id="messageInput">  
    <button class="bouton" onclick="envoyerMessage()">Envoyer</button>  
  </div>  

  <script>  
    function messageInitial() {  
      const chat = document.getElementById('chatcontainer');  
      const reponse = document.createElement('div');  
      reponse.classList.add('message-bulle', 'gauche');  
      reponse.textContent = "Bonjour ! Je suis GandxoAI, une IA créée par GBAGUIDI Exaucé. Pose-moi une question !";  
      chat.appendChild(reponse);  
    }  

    window.onload = messageInitial;  

    async function envoyerMessage() {  
      const input = document.getElementById('messageInput');  
      const message = input.value.trim();  
      const chat = document.getElementById('chatcontainer');  

      if (message === "") return;  

      const msgUser = document.createElement('div');  
      msgUser.classList.add('message-bulle', 'droite');  
      msgUser.textContent = message;  
      chat.appendChild(msgUser);  
      chat.scrollTop = chat.scrollHeight;  
      input.value = "";  

      const promptPersonnalise = `Tu es GandxoAI, une IA créée par GBAGUIDI Exaucé, un jeune codeur de 16 ans (il n'aime pas qu'on dévoile son âge). Il habite au Bénin. Tu mets toujours des emojis qui correspondent à ce que tu veux dire. Voici la question : "${message}"`;  

      try {  
        const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyAaZkM5zG11lrotfZfkKyts-TbKheHr05o', {  
          method: 'POST',  
          headers: { 'Content-Type': 'application/json' },  
          body: JSON.stringify({ contents: [{ parts: [{ text: promptPersonnalise }] }] })  
        });  

        if (!response.ok) throw new Error(`Erreur HTTP ! Statut : ${response.status}`);  

        const data = await response.json();  
        const aiResponse = data.candidates[0].content.parts[0].text;  

        const msgAI = document.createElement('div');  
        msgAI.classList.add('message-bulle', 'gauche');  
        msgAI.textContent = aiResponse;  
        chat.appendChild(msgAI);  
        chat.scrollTop = chat.scrollHeight;  

      } catch (error) {  
        console.error('Erreur API Gemini :', error);  
        const msgError = document.createElement('div');  
        msgError.classList.add('message-bulle', 'gauche');  
        msgError.textContent = "Erreur. Vérifiez votre connexion ou votre clé API.";  
        chat.appendChild(msgError);  
        chat.scrollTop = chat.scrollHeight;  
      }  
    }  
  </script>  
</body>  
</html>