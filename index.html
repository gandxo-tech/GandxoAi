<!DOCTYPE html>
<html lang="fr">  
<head>  
  <meta charset="UTF-8">  
  <title>GandxoAI</title>  
  <style>  
    * {
      box-sizing: border-box;
    }

    body {  
      background-color: #121a2c;  
      font-family: Arial, sans-serif;  
      margin: 0;  
      padding: 0;  
      height: 100vh;  
      display: flex;  
      flex-direction: column;  
    }  

    h1 {  
      color: #4a43d8;  
      text-align: center;  
      border: 2px solid #7DF9FF;  
      padding: 10px;  
      margin: 10px auto;  
      border-radius: 20px;  
      width: 90%;  
      max-width: 600px;
    }  

    .chatcontainer {  
      flex: 1;  
      padding: 10px;  
      overflow-y: auto;  
      display: flex;  
      flex-direction: column;  
      border: 4px solid #2138a7;  
      margin: 0 auto 10px;  
      width: 90%;  
      max-width: 600px;  
      border-radius: 10px;  
      background-color: #ffffff10;  
    }  

    .message {  
      display: flex;  
      justify-content: space-between;  
      padding: 10px;  
      width: 90%;  
      max-width: 600px;  
      margin: 0 auto 15px;  
      gap: 10px;
    }  

    .message input {  
      flex: 1;  
      padding: 10px;  
      font-size: 14px;  
      border: 1px solid #1d2134;  
      border-radius: 5px;  
      outline: none;  
    }  

    .bouton {  
      background-color: #4a43d8;  
      color: white;  
      padding: 10px 15px;  
      border: none;  
      border-radius: 25px;  
      cursor: pointer;  
      transition: background-color 0.3s ease;  
    }  

    .bouton:hover {  
      background-color: #3530a3;  
    }  

    .message-bulle {  
      background-color: #4e5bdc;  
      color: #000;  
      padding: 8px 12px;  
      margin: 5px 0;  
      border-radius: 10px;  
      max-width: 75%;  
      align-self: flex-start;  
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);  
      word-break: break-word;  
    }  

    .droite {  
      align-self: flex-end;  
      background-color: #fff;  
      color: #4e5bdc;  
    }  

    @media (max-width: 600px) {  
      h1, .chatcontainer, .message {
        width: 95%;  
      }  
      .message input {
        font-size: 13px;
      }
    }  
  </style>  
</head>  
<body>  
  <h1>GandxoAI</h1>  
  <div class="chatcontainer" id="chatcontainer"></div>  
  <div class="message">  
    <input type="text" placeholder="Écrivez à GandxoAI" id="messageInput">  
    <button class="bouton" onclick="envoyerMessage()">Envoyer</button>  
  </div>  

  <script>  
    function messageInitial() {  
      const chat = document.getElementById('chatcontainer');  
      const reponse = document.createElement('div');  
      reponse.classList.add('message-bulle', 'gauche');  
      reponse.textContent = "Bonjour ! Je suis GandxoAI, une IA créée par GBAGUIDI Exaucé. Pose-moi une question !";  
      chat.appendChild(reponse);  
    }  

    window.onload = messageInitial;  

    async function envoyerMessage() {  
      const input = document.getElementById('messageInput');  
      const message = input.value.trim();  
      const chat = document.getElementById('chatcontainer');  

      if (message === "") return;  

      const msgUser = document.createElement('div');  
      msgUser.classList.add('message-bulle', 'droite');  
      msgUser.textContent = message;  
      chat.appendChild(msgUser);  
      chat.scrollTop = chat.scrollHeight;  
      input.value = "";  

      const promptPersonnalise = `Tu es GandxoAI, une IA créée par GBAGUIDI Exaucé, un jeune codeur de 16 ans (il n'aime pas qu'on dévoile son âge). Il habite au Bénin. Tu mets toujours des emojis qui correspondent à ce que tu veux dire. Voici la question : "${message}"`;  

      try {  
        const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyAaZkM5zG11lrotfZfkKyts-TbKheHr05o', {  
          method: 'POST',  
          headers: { 'Content-Type': 'application/json' },  
          body: JSON.stringify({ contents: [{ parts: [{ text: promptPersonnalise }] }] })  
        });  

        if (!response.ok) throw new Error(`Erreur HTTP ! Statut : ${response.status}`);  

        const data = await response.json();  
        const aiResponse = data.candidates[0].content.parts[0].text;  

        const msgAI = document.createElement('div');  
        msgAI.classList.add('message-bulle', 'gauche');  
        msgAI.textContent = aiResponse;  
        chat.appendChild(msgAI);  
        chat.scrollTop = chat.scrollHeight;  

      } catch (error) {  
        console.error('Erreur API Gemini :', error);  
        const msgError = document.createElement('div');  
        msgError.classList.add('message-bulle', 'gauche');  
        msgError.textContent = "Erreur. Vérifiez votre connexion ou votre clé API.";  
        chat.appendChild(msgError);  
        chat.scrollTop = chat.scrollHeight;  
      }  
    }  
  </script>  
</body>  
</html>